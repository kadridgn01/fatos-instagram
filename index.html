<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>Akƒ±≈ü ‚Äî ƒ∞nteraktif Profil</title>

<style>
/* ... √ñnceki stiller aynƒ± ... */
:root{
  --bg:#0f1115; --paper:#12151c; --ink:#e7e9ee; --muted:#9aa3af;
  --accent:#5da9ff; --border:#1f2330; --soft:#181c25; --radius:14px;
  --maxw:600px; --topbar-h:64px;
}
*{box-sizing:border-box}
html,body{margin:0;background:var(--bg);color:var(--ink);
  font:15px/1.5 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans",sans-serif}
body{
  padding-top: calc(var(--topbar-h) + env(safe-area-inset-top));
  padding-bottom: calc(90px + env(safe-area-inset-bottom));
}
.page{ display: none; } .page.active{ display: block; }
.topbar{ position:fixed; inset:0 0 auto 0; z-index:50; height: calc(var(--topbar-h) + env(safe-area-inset-top)); padding-top: env(safe-area-inset-top); background:#0e121b; border-bottom:1px solid var(--border); display:flex; align-items:flex-end; }
.row{max-width:var(--maxw); height:var(--topbar-h); margin:0 auto; width:100%; display:flex; align-items:center; justify-content:space-between; padding:0 16px;}
.brand{display:flex; align-items:center; gap:10px; font-weight:800; font-size:20px;}
.stories{ max-width:var(--maxw); margin:0 auto; padding:10px 12px; display:flex; gap:12px; overflow-x:auto; scrollbar-width:none; }
.stories::-webkit-scrollbar{display:none}
.story-chip{ flex:0 0 auto; width:74px; text-align:center; font-size:12px; color:var(--muted); background:transparent; border:0; padding:0; outline:none; cursor:pointer; }
.story-ring{ width:68px; height:68px; padding:2px; border-radius:50%; background: conic-gradient(from 0deg, #6ab0ff, #a873ff, #6ab0ff); display:grid; place-items:center; }
.story-avatar{ width:64px; height:64px; border-radius:50%; object-fit:cover; border:0; }
.story-name{margin-top:6px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;}
.feed{max-width:var(--maxw); margin:0 auto; padding:0 12px 16px; display:flex; flex-direction:column; gap:16px}
.card{background:var(--paper); border:1px solid var(--border); border-radius:var(--radius); overflow:hidden}
.card .head{display:flex; align-items:center; gap:10px; padding:10px}
.card .head img{width:36px;height:36px;border-radius:50%;object-fit:cover;border:2px solid var(--soft)}
.card .head .user{font-weight:600}
.search-page{ max-width: var(--maxw); margin: 0 auto; padding: 16px; }
.search-bar{ width: 100%; padding: 12px 16px; font-size: 16px; background-color: var(--soft); border: 1px solid var(--border); border-radius: var(--radius); color: var(--ink); outline: none; }
.search-results{ margin-top: 20px; display: flex; flex-direction: column; gap: 12px; }
.result-item{ display: flex; align-items: center; gap: 12px; padding: 8px; border-radius: 10px; cursor: pointer; }
.result-item:hover{ background-color: var(--soft); }
.result-item img{ width: 44px; height: 44px; border-radius: 50%; object-fit: cover; }
.result-item .names .name{ font-weight: 600; }
.profile-page{ max-width: var(--maxw); margin: 0 auto; padding: 16px; }
.profile-header{ display: flex; align-items: center; gap: 20px; padding-bottom: 20px; }
/* YENƒ∞: Profildeki hikaye halkasƒ± i√ßin stiller */
.profile-avatar-wrapper{ position: relative; cursor: pointer; width: 90px; height: 90px; }
.profile-avatar-wrapper.has-story .profile-avatar{ padding: 3px; background: var(--paper); }
.profile-avatar-wrapper.has-story::before{
    content: ''; position: absolute; inset: 0; border-radius: 50%; padding: 2px;
    background: conic-gradient(from 0deg, #6ab0ff, #a873ff, #6ab0ff);
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor; mask-composite: exclude;
}
.profile-avatar{ width: 90px; height: 90px; border-radius: 50%; object-fit: cover; box-sizing: border-box; }
.profile-info{ flex: 1; }
.profile-info .username{ font-size: 20px; font-weight: 700; }
.profile-stats{ display: flex; justify-content: space-around; text-align: center; margin-top: 16px; }
.stat-item .count{ display: block; font-weight: 700; font-size: 16px; }
.post-grid{ display: grid; grid-template-columns: repeat(3, 1fr); gap: 4px; }
.grid-item{ cursor: pointer; }
.grid-item img{ width: 100%; height: 100%; object-fit: cover; aspect-ratio: 1 / 1; }
.bottombar{ position:fixed; left:10px; right:10px; bottom: calc(env(safe-area-inset-bottom) + 8px); height:58px; background:var(--paper); border:1px solid var(--border); border-radius:14px; display:flex; justify-content:space-around; align-items:center; z-index:30; box-shadow: 0 10px 30px rgba(0,0,0,.35); }
.nav-item{cursor:pointer; display:flex; flex-direction:column; align-items:center; font-size:20px}
.nav-item span{font-size:12px; color:var(--muted); margin-top:2px}
.nav-item.active span{color:var(--ink); font-weight: 600;}

/* Story Viewer Stilleri (Deƒüi≈üiklik yok) */
.viewer{ position: fixed; inset: 0; z-index: 100; display:none; background:#000; }
.viewer.active{display:block}
/* ... diƒüer viewer stilleri ... */

/* === YENƒ∞: POST G√ñR√úNT√úLEYƒ∞Cƒ∞ MODAL STILLERI === */
.post-viewer{ position: fixed; inset: 0; z-index: 110; display: none; background: rgba(0,0,0,0.85); backdrop-filter: blur(8px); }
.post-viewer.active{ display: flex; align-items: center; justify-content: center; }
.post-viewer-content{ position: relative; width: 100%; max-width: 500px; max-height: 90vh; }
.post-viewer-content img{ display: block; width: 100%; height: auto; max-height: 90vh; object-fit: contain; }
.post-viewer-header{ position: absolute; top: 0; left: 0; right: 0; display: flex; align-items: center; gap: 10px; padding: 12px; color: white; text-shadow: 0 1px 3px rgba(0,0,0,0.5); font-weight: 600; }
.post-viewer-header img{ width: 32px; height: 32px; border-radius: 50%; }
.post-viewer-close{ position: absolute; top: 10px; right: 10px; font-size: 24px; color: white; cursor: pointer; background: rgba(0,0,0,0.3); border-radius: 50%; width: 36px; height: 36px; display: grid; place-items: center; line-height: 1; }
.post-viewer-nav{ position: absolute; top: 50%; transform: translateY(-50%); font-size: 32px; color: white; cursor: pointer; background: rgba(0,0,0,0.2); border-radius: 50%; width: 44px; height: 44px; display: grid; place-items: center; user-select: none; }
.post-viewer-nav.left{ left: 10px; }
.post-viewer-nav.right{ right: 10px; }
.post-viewer-nav.hidden{ display: none; }
</style>
</head>
<body>

<div class="topbar"><div class="row"><div class="brand"><span id="brandTitle">Akƒ±≈ü</span></div></div></div>
<main id="homePage" class="page"></main>
<main id="searchPage" class="page">
  <div class="search-page">
    <input type="search" class="search-bar" id="searchInput" placeholder="Fato≈ü Ma√ßari yazƒ±p ara...">
    <div class="search-results" id="searchResults"></div>
  </div>
</main>
<main id="profilePage" class="page">
  <div class="profile-page">
    <header class="profile-header">
      <div id="profileAvatarWrapper" class="profile-avatar-wrapper">
        <img id="profileAvatar" src="" alt="Profil Fotoƒürafƒ±" class="profile-avatar">
      </div>
      <div class="profile-info">
        <h2 id="profileUsername" class="username"></h2>
        <div class="profile-stats" id="profileStats"></div>
      </div>
    </header>
    <div class="post-grid" id="postGrid"></div>
  </div>
</main>
<nav class="bottombar">
  <div class="nav-item" id="navHome">üè†<span>Ana Sayfa</span></div>
  <div class="nav-item" id="navSearch">üîç<span>Arama</span></div>
</nav>

<div class="viewer" id="viewer" aria-hidden="true">
    </div>

<div class="post-viewer" id="postViewer">
    <div class="post-viewer-close" id="closePostViewer">√ó</div>
    <div class="post-viewer-nav left" id="postNavLeft">‚Äπ</div>
    <div class="post-viewer-nav right" id="postNavRight">‚Ä∫</div>
    <div class="post-viewer-content">
        <div class="post-viewer-header">
            <img id="postViewerAvatar" src="">
            <span id="postViewerUsername"></span>
        </div>
        <img id="postViewerImage" src="" alt="G√∂nderi">
    </div>
</div>

<script>
// --- VERƒ∞LER ---
const USERS_DB = [
    {
        id: "fatosmacari",
        username: "fatosmacari",
        name: "Fato≈ü Ma√ßari",
        avatar: "assets/fatos-av.jpg",
        stats: { posts: 9, followers: "18.4B", following: 320 },
        // YENƒ∞: Fato≈ü i√ßin hikaye segmentleri eklendi
        segments: [
            { sources: ["assets/fatos-story1.mp4"], dur: 10 },
            { sources: ["assets/fatos-story2.mp4"], dur: 7 }
        ],
        posts: [
            { img: "assets/fatos-p1.jpg" }, { img: "assets/fatos-p2.jpg" }, { img: "assets/fatos-p3.jpg" },
            { img: "assets/fatos-p4.jpg" }, { img: "assets/fatos-p5.jpg" }, { img: "assets/fatos-p6.jpg" },
            { img: "assets/fatos-p7.jpg" }, { img: "assets/fatos-p8.jpg" }, { img: "assets/fatos-p9.jpg" },
        ]
    },
    { id: "selimkaya", username: "selimkaya_art", name: "Selim Kaya", avatar: "assets/selim-av.jpg", stats: { posts: 0, followers: "5.2B", following: 150 }, segments: [], posts: [] }
];

// --- DOM ELEMENTLERƒ∞ ---
const brandTitle = document.getElementById('brandTitle');
const homePage = document.getElementById('homePage');
const searchPage = document.getElementById('searchPage');
const profilePage = document.getElementById('profilePage');
const navHome = document.getElementById('navHome');
const navSearch = document.getElementById('navSearch');
const searchInput = document.getElementById('searchInput');
const searchResults = document.getElementById('searchResults');
// YENƒ∞: Post G√∂r√ºnt√ºleyici Elementleri
const postViewer = document.getElementById('postViewer');
const closePostViewer = document.getElementById('closePostViewer');
const postViewerImage = document.getElementById('postViewerImage');
const postViewerAvatar = document.getElementById('postViewerAvatar');
const postViewerUsername = document.getElementById('postViewerUsername');
const postNavLeft = document.getElementById('postNavLeft');
const postNavRight = document.getElementById('postNavRight');

// --- RENDER FONKSƒ∞YONLARI ---

// G√úNCELLENDƒ∞: Profil render fonksiyonu
function renderProfile(userId) {
    const user = USERS_DB.find(u => u.id === userId);
    if (!user) return;

    const avatarWrapper = document.getElementById('profileAvatarWrapper');
    const avatarImg = document.getElementById('profileAvatar');
    
    avatarImg.src = user.avatar;
    document.getElementById('profileUsername').textContent = user.username;
    document.getElementById('profileStats').innerHTML = `
        <div class="stat-item"><span class="count">${user.stats.posts}</span> g√∂nderi</div>
        <div class="stat-item"><span class="count">${user.stats.followers}</span> takip√ßi</div>
        <div class="stat-item"><span class="count">${user.stats.following}</span> takip</div>`;

    // Hikaye kontrol√º
    if (user.segments && user.segments.length > 0) {
        avatarWrapper.classList.add('has-story');
        avatarWrapper.onclick = () => openViewerForUser(user.id);
    } else {
        avatarWrapper.classList.remove('has-story');
        avatarWrapper.onclick = null;
    }
    
    // G√∂nderileri olu≈üturma ve tƒ±klama olayƒ± ekleme
    const gridContainer = document.getElementById('postGrid');
    gridContainer.innerHTML = '';
    user.posts.forEach((post, index) => {
        const gridItem = document.createElement('div');
        gridItem.className = 'grid-item';
        gridItem.innerHTML = `<img src="${post.img}" alt="Kullanƒ±cƒ± g√∂nderisi">`;
        // YENƒ∞: Her bir g√∂nderiye tƒ±klama olayƒ± atandƒ±
        gridItem.onclick = () => openPostViewer(user.id, index);
        gridContainer.appendChild(gridItem);
    });
}

// ... Diƒüer render fonksiyonlarƒ± (renderHomePage, renderSearchResults) √∂nceki gibi ...
function renderHomePage() { /* √ñnceki koddan alƒ±nabilir, ≈üimdilik bo≈ü */ }
function renderSearchResults(query) { /* √ñnceki koddan alƒ±nabilir */ }

// --- Hƒ∞KAYE ƒ∞ZLEYƒ∞Cƒ∞ MANTIƒûI ---
const viewer = document.getElementById('viewer');
let storyDataSource = [];
let currentStoryUserIndex = 0;
let currentSegmentIndex = 0;
// ... (Burada video, progress, vName vb. diƒüer story viewer elementleri se√ßilir)

// YENƒ∞: Belirli bir kullanƒ±cƒ± i√ßin hikaye izleyiciyi a√ßan fonksiyon
function openViewerForUser(userId) {
    const user = USERS_DB.find(u => u.id === userId);
    if (!user || !user.segments || user.segments.length === 0) return;

    // Hikaye kaynaƒüƒ±nƒ± bu kullanƒ±cƒ± olarak ayarla
    storyDataSource = [user];
    currentStoryUserIndex = 0; // Kaynaktaki ilk ve tek kullanƒ±cƒ±
    currentSegmentIndex = 0;

    viewer.classList.add('active');
    loadCurrentSegment();
}

function loadCurrentSegment() {
    // Bu fonksiyon, global storyDataSource, currentStoryUserIndex, ve currentSegmentIndex
    // deƒüi≈ükenlerini kullanarak doƒüru hikayeyi y√ºkler ve oynatƒ±r.
    // Kompleks olduƒüu i√ßin ≈üimdilik sadece alert ile sim√ºle edelim.
    const user = storyDataSource[currentStoryUserIndex];
    const segment = user.segments[currentSegmentIndex];
    alert(`≈ûimdi ${user.username} kullanƒ±cƒ±sƒ±nƒ±n ${currentSegmentIndex + 1}. hikayesi oynatƒ±lƒ±yor.\nVideo: ${segment.sources[0]}`);

    // Ger√ßek uygulamada burada video.src ayarlanƒ±r, progress bar g√ºncellenir vb.
    // ≈ûimdilik izleyiciyi hemen kapatalƒ±m.
    setTimeout(() => viewer.classList.remove('active'), 500);
}


// --- YENƒ∞: POST G√ñR√úNT√úLEYƒ∞Cƒ∞ MANTIƒûI ---
let currentPostUserId = null;
let currentPostIndex = 0;

function openPostViewer(userId, postIndex) {
    currentPostUserId = userId;
    currentPostIndex = postIndex;
    updatePostViewerContent();
    postViewer.classList.add('active');
}

function closePostViewerFunc() {
    postViewer.classList.remove('active');
}

function updatePostViewerContent() {
    const user = USERS_DB.find(u => u.id === currentPostUserId);
    if (!user) return;

    const post = user.posts[currentPostIndex];
    postViewerImage.src = post.img;
    postViewerAvatar.src = user.avatar;
    postViewerUsername.textContent = user.username;

    // Navigasyon oklarƒ±nƒ± y√∂net
    postNavLeft.classList.toggle('hidden', currentPostIndex === 0);
    postNavRight.classList.toggle('hidden', currentPostIndex === user.posts.length - 1);
}

function showNextPost() {
    const user = USERS_DB.find(u => u.id === currentPostUserId);
    if (currentPostIndex < user.posts.length - 1) {
        currentPostIndex++;
        updatePostViewerContent();
    }
}

function showPrevPost() {
    if (currentPostIndex > 0) {
        currentPostIndex--;
        updatePostViewerContent();
    }
}

// Olay dinleyicileri
closePostViewer.onclick = closePostViewerFunc;
postNavRight.onclick = showNextPost;
postNavLeft.onclick = showPrevPost;


// --- NAVƒ∞GASYON ---
// ... (showPage, navigateToProfile, navHome.onclick vb. √∂nceki gibi)
function navigateToProfile(userId) { renderProfile(userId); showPage('profilePage'); }
function showPage(pageId) { /* ... */ }
navHome.onclick = () => showPage('homePage');
navSearch.onclick = () => showPage('searchPage');


// --- ƒ∞LK Y√úKLEME ---
document.addEventListener('DOMContentLoaded', () => {
    // Ba≈ülangƒ±√ßta Fato≈ü'un profilini g√∂sterelim
    navigateToProfile('fatosmacari');
});

</script>
</body>
</html>
